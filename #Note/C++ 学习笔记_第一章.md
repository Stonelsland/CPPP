# C++ 学习笔记

## 第一章  开始





#### 1.1 编写一个简单的C++程序

主函数main：

```
int main()
{
	return 0;
}
```

每个C++程序必须要有一个main函数，系统通过调用main函数来运行C++程序，如果运行成功返回0；返回非0的意义由系统定义，通常用来指出错误类型。

定义函数必须要有：

​	1.返回类型：int

​	2.函数名称：main

​	3.形参列表：()

​	4.函数体：{ return 0; }，return语句会直接结束函数体，并向调用者返回一个值。

##### *重要概念——类型：一种类型定义了数据元素的内容，也定义了这类数据可以进行的计算。如果名为V的变量类型为T，那么我们说“V具有类型T”，或者“V是T类型变量”。

###### 	1.1.1编译、运行程序

写好的程序文件叫“源文件”，它以后缀结尾（ . 加其他字符），后缀告诉系统这个文件是一个C++程序。不同编译器用不同的后缀命名约定，最常见的包括：`.cc`  `.cxx`  `.cpp`  `.cp`以及`.c`

要想被机器运行，还得通过**编译**才成。

通过编译后，会生成一个可执行文件。Windows系统的可执行文件后缀为`.exe`，Unix系统的则为`.out`。，运行Windows系统中的可执行文件可以忽略扩展名`.exe`，而有些系统则不能忽略。

​	Windows中： $ `prog1`

​	UNIX中： $ `a.out`

访问main的返回值的方法依赖于系统：

​	Windows：$ echo %ERROR LEVEL%

​	UNIX: $ echo $?





#### 1.2 初识输入、输出

**标准库**提供IO机制，`iostream`库包含了`istream`和`ostream`，分别表示输入流和输出流，**流**就是字符序列，随时间按顺序生成或消耗。

**标准库**定义了四个IO对象：`cout`、`cin`、`cerr`、`clog`。

​	`cout`：标准输出

​	`cin`：标准输入

​	`cerr`：通常用来输出错误和警示信息

​	`clog`：输出程序运行时的一般性信息

**#include**用以使用库，写在源文件头部。



**向流写入数据**

```
(std::cout << "Enter two numbers:" ) << std::endl;
```

**<<**运算符左边是`ostream`对象——`cout`，右边是要输出的内容，运算返回一个`ostream`对象，所以小括号内还是一个"`cout`"，所以有了这种连续的写法。

**`endl`**是操纵符，用以结束当前行，并将设备关联的缓冲区中的内容刷到设备中，它可以保证到目前为止程序所产生的所有输出都真正写入**输出流**中，而不是仅仅停留在内存中等待写入流。	

`std::cout`中，没有直接使用`cout`是为了避免`cout`函数和其他同名的函数起冲突，其中`std::`前缀是指出这里调用的是名为`std`的**命名空间**中的`cout`和`cin`。

**从流读取数据**

```
int v1 = 0, v2 = 2;
(std::cin >>  v1 ) >> v2;
```

和`cout`类似，在**>>**左边也是`istream`的对象——`cin`，把从流中读取的数据存放在右侧的变量中，而且它也返回一个`ostream`对象，所以有了这种连续的写法。

```
int v1 = 0, v2 = 2;
std::cout << "The sum of " << v1 << " and " << v2
		  << " is " << v1 + v2 << std::endl;
```



值得一提的是，这里的**<<**右侧的数据类型有点多，有字符串常量，有int类型的变量，有表达式，还有操纵符。标准库定义了不同版本的输入输出运算符，来处理这些不同类型的对象。（现在的我觉得这是运算符重载，虽然看上去都是**<<**，但是实际上不同的类型前面的**<<**都具有不同的意义，所以才能处理不同的数据类型）





#### 1.3 注释简介

​	更新代码的同时也要同时**更新注释**，这很重要，**错误的注释比没有注释更加致命**。

注释包括：

​	单行注释：//
​	多行注释：

```
/*
 *
 *
 */
```

**注意**，多行注释不能嵌套（\有转意，/没有转意）：

```
/*
 *注释对/**/不能嵌套
 *
 */
```







#### 1.4 控制流

​	**1.4.1 while 语句**

while (*condition*)

​	*statement*

开始执行while循环时，先检测*condition*，如果*condition*运算结果为TRUE（*condition*就是一个运算真伪的表达式），就进去执行循环体——*statement*，然后继续检测*condition*，如此交替，直至一次的*statement*运行完之后，*condition*的运算结果为FALSE，就直接结束while循环，运行while循环之后的语句。循环体中一定要对*condition*进行更迭，以避免其判断结果一直不变，导致死循环。



​	**1.4.2 for 语句**

```
int sum = 0;
for (int val = 0; val <= 10; ++val)
{
	sum += val;
}
cout << "Sum of 1 to 10inclusive is "
	 << sum << endl;
return 0;
```

for 循环由以下部分组成：

​	**循环头**：初始化语句`init-statement`：int val = 0;初始化语句只执行一次，且变量val只在for 循环里有用，循																		环结束后这个变量就不存在了。

​					循环条件 `condition`

​					表达式语句 `expression`：在循环体之后执行，执行完毕之后，再去判断`condition`。如果有一次`expression`执行完以后，`condition`为FALSE，则不再执行后面的循环体和`expression`，去执行for 循环后面的语句。

​	**循环体**：用以对数据进行操作。

​	

​	**1.4.3 读取数量不定的输入数据**

```
#include <iostream>
using namespace std;

int main()
{
	int sum = 0, value = 0;
	// 读取数据直到遇到文件尾，计算所有读入值的和
	while (cin >> value)
	{
		sum += value;
	 } 
	cout << "Sum is: " << sum << endl; 	
	return 0;
} 
```

`while`循环条件的求值就是执行`while`( `cin` >> `value`)。循环条件实际上是`cin`。

当以“`cin` >> `value`”为循环条件时，实际上是**检测流的状态**。如果流是有效的，即流未遇到错误，那么检测成功。当遇到了**文件结束符**，或者遇到一个无效的输入（比如**输入的不是整数**）时，`istream`对象的状态会变为无效，表达式计算结果为`FALSE`。

**关于文件结束符**：不同操作系统有不同的约定。Windows系统中是`Ctrl`+`Z`，然后按`Enter`或者`Return`。UNIX系统中，包括Mac OS X系统中，是`Ctrl`+`D`。



**常见错误**：

​	语法错误（syntax error）

​	类型错误（type error）：给int类型的变量赋值其他类型的值，如，int = "Hello World"

​	声明错误（declaration error）变量使用之前要先定义，未定义就使用会报声明错误。还有一种就是未指明命名空间，即忘掉了`std::`。



**1.4.4 if 语句**

```
if condition
{
	statement
}
else
{
	statement
}
```



#### 1.5 类简介（class type)

`int`、`float`等是C++内置的数据类型，**类**和他们一样，不过是自定义的一种类型，其内部包含数据和操纵这些数据的函数，也就是**类类型**。类一般写在头文件里，当其他程序需要调用这个类的时候，需要在程序开头引用这个类的头文件，也就是**#include**。

**成员函数**

成员函数是定义在类里面的函数，是类的一部分，有时也叫做方法。通常用类的名义来调用它，比如

```
item1.isbn() == item2.isbn()
```

**点运算符**（ . ）左边是类类型对象，右边是这个类内部的成员名，运算结果是为右侧运算对象指定的成员。 